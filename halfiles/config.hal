# load RT components
loadrt [KINS]KINEMATICS
loadrt [EMCMOT]EMCMOT base_period_nsec=[EMCMOT]BASE_PERIOD servo_period_nsec=[EMCMOT]SERVO_PERIOD num_joints=[KINS]JOINTS
loadrt arisc pwm="p,p,f" out="PA0,PA1,PA12,PC1,PG8" in="PA9,PA8,PA10,PA20,PE2,PE3,PE9,PE10,PE11,PG6,PG7,PG9" encoders=3
loadrt ilowpass names=lowpass-x,lowpass-z,lowpass-t
loadrt mux8 count=2
loadrt encoder num_chan=1
loadrt estop_latch
#loadrt near count=1 # NOT sure if I would need it.

loadusr hal_manualtoolchange # NOT sure if I would need it.

# add RT functions to the servo thread
addf arisc.gpio.read          servo-thread
addf arisc.pwm.read           servo-thread
addf motion-command-handler   servo-thread
addf motion-controller        servo-thread
addf arisc.gpio.write         servo-thread
addf arisc.pwm.write          servo-thread
addf arisc.encoder.read       servo-thread
addf encoder.capture-position servo-thread
addf encoder.update-counters  base-thread
#addf near.0                  servo-thread


# other IO setup
setp arisc.gpio.PA8-pull 1
net estop arisc.gpio.PA8-in => iocontrol.0.emc-enable-in
